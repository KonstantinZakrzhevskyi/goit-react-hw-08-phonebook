{"version":3,"sources":["components/Navigation/Navigation.module.css","components/Container/Container.module.css","components/AuthNav/AuthNav.module.css","redux/contacts/contacts-operations.js","redux/contacts/contacts-selectors.js","redux/contacts/contacts-actions.js","redux/contacts/contacts-reducer.js","components/Loader/Loader.module.css","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js","redux/store.js","components/Container/Container.js","components/Navigation/Navigation.js","components/UserMenu/defaultAvatar.png","components/UserMenu/UserMenu.js","components/AuthNav/AuthNav.js","components/AppBar/AppBar.js","components/Loader/Loader.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","index.js"],"names":["module","exports","axios","defaults","baseURL","fetchContacts","createAsyncThunk","_","a","rejectWithValue","get","data","addContact","name","number","post","deleteContact","id","delete","getContacts","state","contacts","items","getFilter","filter","getLoading","loading","getVisibleContacts","normalizeFilter","toLowerCase","trim","contact","includes","changeFilter","createAction","createReducer","fulfilled","payload","pending","rejected","error","combineReducers","token","headers","common","Authorization","register","credentials","logIn","logOut","fetchCurrentUser","thunkAPI","getState","persistedToken","auth","authOperations","authSelectors","getIsLoggedIn","isLoggedIn","getUserName","user","getIsFetchingCurrentUser","isFetchingCurrentUser","authSlice","createSlice","initialState","email","isFechingCurrentUser","extraReducers","action","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","contactsReducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","concat","logger","devTools","process","persistor","persistStore","Container","title","children","className","s","container","Navigation","useSelector","to","isActive","activeLink","link","UserMenu","dispatch","useDispatch","avatar","defaultAvatar","src","alt","width","type","onClick","active","AuthNav","AppBar","Loading","loader","color","height","timeout","PrivateRoute","redirectTo","PublicRoute","restricted","HomePage","lazy","RegisterPage","LoginPage","ContactsPage","App","useEffect","fallback","Loader","path","element","position","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7a9b1af3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Navigation_link__1TrI1\",\"activeLink\":\"Navigation_activeLink__2gumN Navigation_link__1TrI1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__TK92G\",\"title\":\"Container_title__V53L_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__1aB9k\",\"activeLink\":\"AuthNav_activeLink__2lPPG AuthNav_link__1aB9k\"};","import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nexport const fetchContacts = createAsyncThunk(\r\n  'contacts/fetchContacts',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.get('/contacts');\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const addContact = createAsyncThunk(\r\n  'contacts/addContact',\r\n  async ({ name, number }, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.post('/contacts', { name, number });\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const deleteContact = createAsyncThunk(\r\n  'contacts/deleteContact',\r\n  async (id, { rejectWithValue }) => {\r\n    try {\r\n      await axios.delete(`/contacts/${id}`);\r\n      return id;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\n// ============= 1 вариант =============\r\n// const fetchContacts = () => {\r\n//   dispatch(fetchContactsRequest());\r\n\r\n//   axios\r\n//     .get('/contacts')\r\n//     .then(({ data }) => dispatch(fetchContactsSuccess(data)))\r\n//     .catch(error => dispatch(fetchContactsError(error)));\r\n// };\r\n\r\n//  ============ 2 вариант(асинхронный) ==========\r\n// const fetchContacts = () => async dispatch => {\r\n//   dispatch(fetchContactsRequest);\r\n\r\n//   try {\r\n//     const { data } = await axios.get('/contacts');\r\n\r\n//     dispatch(fetchContactsSuccess(data));\r\n//   } catch (error) {\r\n//     dispatch(fetchContactsError(error));\r\n//   }\r\n// };\r\n\r\n// const addContact = text => dispatch => {\r\n//   const contact = {\r\n//     text,\r\n//     completed: false,\r\n//   };\r\n\r\n//   dispatch(addContactRequest());\r\n\r\n//   axios\r\n//     .post('/contacts', contact)\r\n//     .then(({ data }) => dispatch(addContactSuccess(data)))\r\n//     .catch(error => dispatch(addContactError(error)));\r\n// };\r\n\r\n// const deleteContact = contactId => dispatch => {\r\n//   dispatch(deleteContactRequest());\r\n\r\n//   axios\r\n//     .delete('/contacts/${contactId')\r\n//     .then(() => dispatch(deleteContactSuccess(contactId)))\r\n//     .catch(error => dispatch(deleteContactError(error)));\r\n// };\r\n\r\n// export default { fetchContacts, addContact, deleteContact };\r\n","export const getContacts = state => state.contacts.items;\r\nexport const getFilter = state => state.contacts.filter;\r\nexport const getLoading = state => state.contacts.loading;\r\n\r\nexport const getVisibleContacts = state => {\r\n  const contacts = getContacts(state);\r\n  const filter = getFilter(state);\r\n  const normalizeFilter = filter.toLowerCase().trim();\r\n\r\n  return contacts.filter(contact =>\r\n    contact.name.toLowerCase().includes(normalizeFilter),\r\n  );\r\n};\r\n","import { createAction } from '@reduxjs/toolkit';\r\n\r\nexport const changeFilter = createAction('contacts/filter');\r\n\r\n// export const changeFilterRequest = createAction('contacts/filter');\r\n// export const changeFilterSuccess = createAction('contacts/filter');\r\n// export const changeFilterError = createAction('contacts/filter');\r\n","import { combineReducers } from 'redux';\r\nimport { createReducer } from '@reduxjs/toolkit';\r\nimport {\r\n  fetchContacts,\r\n  addContact,\r\n  deleteContact,\r\n} from './contacts-operations';\r\nimport { changeFilter } from './contacts-actions';\r\n\r\nconst items = createReducer([], {\r\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\r\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\r\n  [deleteContact.fulfilled]: (state, { payload }) =>\r\n    state.filter(contact => contact.id !== payload),\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n  [fetchContacts.pending]: () => true,\r\n  [fetchContacts.fulfilled]: () => false,\r\n  [fetchContacts.rejected]: () => false,\r\n\r\n  [addContact.pending]: () => true,\r\n  [addContact.fulfilled]: () => false,\r\n  [addContact.rejected]: () => false,\r\n\r\n  [deleteContact.pending]: () => true,\r\n  [deleteContact.fulfilled]: () => false,\r\n  [deleteContact.rejected]: () => false,\r\n});\r\n\r\nconst filter = createReducer('', {\r\n  [changeFilter]: (_, { payload }) => payload,\r\n});\r\n\r\nconst error = createReducer(null, {\r\n  [fetchContacts.rejected]: (_, { payload }) => payload,\r\n  [fetchContacts.rejected]: () => null,\r\n});\r\n\r\nexport default combineReducers({\r\n  items,\r\n  filter,\r\n  loading,\r\n  error,\r\n});\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3feav\"};","import axios from 'axios';\r\nimport { createAsyncThunk, isRejectedWithValue } from '@reduxjs/toolkit';\r\n// import { toast } from 'redux-toastify';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nconst register = createAsyncThunk('auth/register', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/signup', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    // toast.error(error.message);\r\n  }\r\n});\r\n\r\nconst logIn = createAsyncThunk('auth/login', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/login', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    // toast.error(error.message);\r\n  }\r\n});\r\n\r\nconst logOut = createAsyncThunk('auth/logout', async () => {\r\n  try {\r\n    await axios.post('/users/logout');\r\n    token.unset();\r\n  } catch (error) {\r\n    //  toast.error(error.message);\r\n  }\r\n});\r\n\r\nconst fetchCurrentUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n    try {\r\n      const { data } = await axios.get('/users/current');\r\n      return data;\r\n    } catch (error) {}\r\n  },\r\n);\r\n\r\nconst authOperations = {\r\n  register,\r\n  logIn,\r\n  logOut,\r\n  fetchCurrentUser,\r\n};\r\n\r\nexport default authOperations;\r\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\n\r\nconst getUserName = state => state.auth.user.name;\r\n\r\nconst getIsFetchingCurrentUser = state => state.auth.isFetchingCurrentUser;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getUserName,\r\n  getIsFetchingCurrentUser,\r\n};\r\n\r\nexport default authSelectors;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  isFechingCurrentUser: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n\r\n    [authOperations.logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n\r\n    [authOperations.logOut.fulfilled](state, action) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n\r\n    [authOperations.fetchCurrentUser.pending](state, action) {\r\n      state.isFechingCurrentUser = true;\r\n    },\r\n\r\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n      state.isFechingCurrentUser = false;\r\n    },\r\n\r\n    [authOperations.fetchCurrentUser.rejected](state, action) {\r\n      state.isFechingCurrentUser = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport logger from 'redux-logger';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\n// import contactsReducer from './contacts/contacts-reducer';\r\nimport { contactsReducer } from './contacts';\r\nimport { authReducer } from './auth';\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    // auth: authReducer,\r\n    contacts: contactsReducer,\r\n  },\r\n  middleware: getDefaultMiddleware =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n      },\r\n    }).concat(logger),\r\n  devTools: process.env.NODE_ENV === 'development',\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","import PropTypes from 'prop-types';\r\nimport s from './Container.module.css';\r\n\r\nexport default function Container({ title, children }) {\r\n  return (\r\n    <section className={s.container}>\r\n      {title && <h2 className={s.title}>{title}</h2>}\r\n      {children}\r\n    </section>\r\n  );\r\n}\r\n\r\nContainer.propTypes = {\r\n  title: PropTypes.string,\r\n  children: PropTypes.node,\r\n};\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { authSelectors } from 'redux/auth';\r\nimport s from './Navigation.module.css';\r\n\r\nexport default function Navigation() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <nav>\r\n      <NavLink\r\n        to=\"/\"\r\n        className={({ isActive }) => (isActive ? s.activeLink : s.link)}\r\n      >\r\n        Home\r\n      </NavLink>\r\n\r\n      {isLoggedIn && (\r\n        <NavLink\r\n          to=\"/contacts\"\r\n          className={({ isActive }) => (isActive ? s.activeLink : s.link)}\r\n        >\r\n          Contacts\r\n        </NavLink>\r\n      )}\r\n    </nav>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/defaultAvatar.45ca501c.png\";","import { useDispatch, useSelector } from 'react-redux';\r\nimport { authSelectors, authOperations } from 'redux/auth';\r\n\r\nimport defaultAvatar from './defaultAvatar.png';\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUserName);\r\n  const avatar = defaultAvatar;\r\n\r\n  return (\r\n    <div>\r\n      <img src={avatar} alt=\"avatar\" width=\"28\" />\r\n      <span>Welcome, {`${name}!`}</span>\r\n      <button type=\"button\" onClick={() => dispatch(authOperations.logOut())}>\r\n        Logout\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './AuthNav.module.css';\r\n\r\nconst active = ({ isActive }) => (isActive ? s.activeLink : s.link);\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <nav>\r\n      <NavLink to=\"/register\" className={active}>\r\n        Sign up\r\n      </NavLink>\r\n      <NavLink to=\"/login\" className={active}>\r\n        Login\r\n      </NavLink>\r\n    </nav>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport Navigation from '../Navigation';\r\n// import UserMenu from '../UserMenu';\r\n// import AuthNav from '../AuthNav';\r\nimport UserMenu from 'components/UserMenu';\r\nimport AuthNav from 'components/AuthNav';\r\n\r\nimport { authSelectors } from 'redux/auth';\r\n\r\nexport default function AppBar() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <header>\r\n      <Navigation />\r\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    </header>\r\n  );\r\n}\r\n","import Loader from 'react-loader-spinner';\r\nimport s from './Loader.module.css';\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div className={s.loader}>\r\n      <Loader\r\n        type=\"BallTriangle\"\r\n        color=\"#00BFFF\"\r\n        height={200}\r\n        width={200}\r\n        timeout={3000}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import { useSelector } from 'react-redux';\r\n// import { Route, Redirect } from 'react-router-dom';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { authSelectors } from 'redux/auth';\r\n\r\n// export default function PrivateRoute({\r\n//   component: Component,\r\n//   redirectTo,\r\n//   children,\r\n//   ...routeProps\r\n// }) {\r\n//   const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n//   return (\r\n//     <Route {...routeProps}>\r\n//       {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n//     </Route>\r\n//   );\r\n// }\r\n\r\nexport default function PrivateRoute({ children, redirectTo = '/' }) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return isLoggedIn ? children : <Navigate to={redirectTo} />;\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { authSelectors } from 'redux/auth';\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = '/',\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLoggedIn && restricted;\r\n\r\n  // console.log('redirectTo:', redirectTo);\r\n  // console.log('restricted:', restricted);\r\n  // console.log('shouldRedirect:', shouldRedirect);\r\n  return shouldRedirect ? <Navigate to={redirectTo} /> : children;\r\n}\r\n","import { useEffect, useSelectors } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { lazy, Suspense } from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport { Toaster } from 'react-hot-toast';\n\n// import Section from 'components/Section';\n// import ContactForm from 'components/ContactForm';\n// import Filter from 'components/Filter';\n// import ContactList from 'components/ContactList';\n// import { getLoading } from 'redux/contacts/contacts-selectors';\n\nimport Container from 'components/Container';\nimport AppBar from 'components/AppBar';\nimport Loader from 'components/Loader';\nimport { authOperations, authSelectors } from 'redux/auth';\nimport './App.css';\nimport PrivateRoute from 'components/PrivateRoute';\nimport PublicRoute from 'components/PublicRoute';\n\nconst HomePage = lazy(() => import('./views/HomePage'));\n\nconst RegisterPage = lazy(() => import('./views/RegisterPage'));\n\nconst LoginPage = lazy(() => import('./views/LoginPage'));\n\nconst ContactsPage = lazy(() => import('./views/ContactsPage'));\n\nfunction App() {\n  const dispatch = useDispatch();\n  const isFetchingCurrentUser = useSelector(\n    authSelectors.getIsFetchingCurrentUser,\n  );\n\n  useEffect(() => {\n    dispatch(authOperations.fetchCurrentUser());\n  }, [dispatch]);\n\n  return (\n    !isFetchingCurrentUser && (\n      <Container>\n        <AppBar />\n        <Suspense fallback={<Loader />}>\n          <Routes>\n            <Route\n              path=\"/\"\n              element={\n                <PublicRoute>\n                  <HomePage />\n                </PublicRoute>\n              }\n            />\n            <Route\n              path=\"/register\"\n              element={\n                <PublicRoute restricted>\n                  <RegisterPage />\n                </PublicRoute>\n              }\n            />\n            <Route\n              path=\"/login\"\n              element={\n                <PublicRoute redirectTo=\"/contacts\" restricted>\n                  <LoginPage />\n                </PublicRoute>\n              }\n            />\n            <Route\n              path=\"/contacts\"\n              element={\n                <PrivateRoute redirectTo=\"/login\">\n                  <ContactsPage />\n                </PrivateRoute>\n              }\n            />\n          </Routes>\n        </Suspense>\n\n        <Toaster position=\"top-right\" />\n      </Container>\n    )\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { Provider } from 'react-redux';\nimport { store, persistor } from './redux/store';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}